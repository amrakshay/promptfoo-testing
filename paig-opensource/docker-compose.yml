version: '3.8'

services:
  paig-opensource:
    image: paig-opensource-server:${VERSION}
    container_name: paig-opensource-container
    environment:
      - PORT=${PORT}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - PAIG_SECURECHAT_SAFE_PORT=${PAIG_SECURECHAT_SAFE_PORT}
      - PAIG_SECURECHAT_UNSAFE_PORT=${PAIG_SECURECHAT_UNSAFE_PORT}
    ports:
      - "${PORT}:${PORT}"
    volumes:
      - ./custom-conf:/opt/paig/custom-conf
      - ./scripts:/scripts
    networks:
      - app-network
    entrypoint: /bin/bash
    command: -c "paig run --port ${PORT} --host 0.0.0.0"

networks:
  app-network:
    external: true
